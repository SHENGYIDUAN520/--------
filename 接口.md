智能陪护数据监控平台 - 前后端对接文档
1. 接口规范
1.1 通用响应格式
{
  "code": 200,        // 状态码：200成功，400请求错误，401未授权，500服务器错误
  "message": "成功",   // 响应消息
  "data": {           // 响应数据
    // 具体内容
  },
  "timestamp": 1682456789123  // 响应时间戳
}
1.2 分页响应格式
{
  "code": 200,
  "message": "成功",
  "data": {
    "list": [],       // 数据列表
    "total": 100,     // 总记录数
    "page": 1,        // 当前页码
    "pageSize": 10    // 每页大小
  },
  "timestamp": 1682456789123
}
1.3 请求方法规范
GET：获取资源
POST：创建资源
PUT：更新资源
DELETE：删除资源
1.4 认证方式
使用Bearer Token认证
在请求头中添加：Authorization: Bearer {token}
2. 核心接口对接
2.1 仪表盘数据接口
接口：GET /api/stats/dashboard
功能：获取首页仪表盘所需的所有数据
参数：无
响应数据：
{
  "code": 200,
  "message": "成功",
  "data": {
    "status": {
      "normal": 75,        // 正常状态百分比
      "abnormal": 25       // 异常状态百分比
    },
    "sedentary": {
      "normal": 73,        // 正常静坐时长百分比
      "abnormal": 27       // 异常静坐时长百分比
    },
    "sleep": {
      "male": [7.0, 6.5, 7.2, 7.5, 6.8, 8.1, 7.6],   // 男主人睡眠数据
      "female": [8.2, 7.8, 7.5, 8.0, 7.2, 8.5, 8.1]  // 女主人睡眠数据
    },
    "contacts": [
      {
        "type": "紧急联系人",
        "name": "张小明",
        "phone": "12300001111"
      },
      // 更多联系人...
    ]
  },
  "timestamp": 1682456789123
}2.2 老人详情数据接口
接口：GET /api/elderly/:id/detail
功能：获取单个老人详细信息
参数：
id: 老人ID
响应数据：包含基本信息、健康数据、近期活动等
2.3 历史数据查询接口
接口：GET /api/data/history
功能：查询历史数据
参数：
elderlyId: 老人ID
type: 数据类型(health/activity/sleep/sedentary)
startDate: 开始日期
endDate: 结束日期
page: 页码
pageSize: 每页大小
2.4 告警处理接口
接口：PUT /api/alerts/:id/process
功能：处理告警信息
参数：
id: 告警ID
action: 处理动作(ignore/confirm/emergency)
note: 处理备注
3. 实时数据更新方案
3.1 轮询方式
前端定时请求接口获取最新数据
推荐轮询间隔：5-10秒
适用场景：数据变化频率不高的情况
3.2 WebSocket方式
连接地址：ws://api-server/websocket
认证：通过URL参数传递token
消息格式：JSON格式
数据类型：
status_update: 状态更新
alert: 紧急告警
data_refresh: 数据刷新通知
3.3 Server-Sent Events (SSE)
接口：GET /api/events
认证：HTTP头部Bearer Token
事件类型：
status: 状态更新
alert: 告警事件
data: 数据更新
4. 开发协作流程
4.1 接口开发流程
前后端开发人员共同讨论并确定API规范
后端开发人员实现接口并提供文档
前端开发人员根据文档进行对接
联合测试并解决问题
4.2 版本控制
使用语义化版本号
API版本在URL路径中体现：/api/v1/users
4.3 接口文档
使用Swagger/OpenAPI生成在线文档
文档地址：http://api-server/docs
4.4 跨域处理
后端配置CORS跨域支持
允许的域名需明确配置
5. 测试与调试
5.1 接口测试
使用Postman创建测试集合
自动化测试脚本
性能测试计划
5.2 Mock数据
提供Mock服务器：http://mock-api.example.com
前端可在后端API开发完成前使用Mock数据进行开发
5.3 环境配置
开发环境：http://dev-api.example.com
测试环境：http://test-api.example.com
生产环境：http://api.example.com
6. 部署与持续集成
6.1 前端部署
静态资源CDN分发
构建流程：npm build → 压缩 → 上传CDN
6.2 后端部署
容器化部署(Docker + Kubernetes)
CI/CD流程：代码提交 → 自动测试 → 自动构建 → 自动部署
6.3 监控与告警
系统健康状态监控
接口响应时间监控
错误日志收集与分析
通过以上前端、后端开发文档和对接文档，开发团队可以清晰地了解系统的架构、功能模块和接口规范，有效地协作完成智能陪护数据监控平台的开发工作。